{% extends 'base.html' %}
{% load static %}

{% block title %}Contact - {{ profile.name|default:"Portfolio" }}{% endblock %}

{% block content %}
<!-- Contact Header -->
<section id="contact" class="contact-header py-5 fade-in-section">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center">
                <h1 class="display-5 fw-bold mb-3">Get In Touch</h1>
                <p class="lead text-muted">I'd love to hear from you. Send me a message and I'll respond as soon as possible.</p>
            </div>
        </div>
    </div>
</section>

<!-- Contact Content -->
<section class="contact-content py-5 bg-light fade-in-section">
    <div class="container">
        <div class="row">
            <!-- Contact Form -->
            <div class="col-lg-8 mb-5 mb-lg-0">
                <div class="contact-form card border-0 shadow-sm">
                    <div class="card-body p-4">
                        <h2 class="h4 mb-4">Send Me a Message</h2>
                        
                        <form id="contact-form" method="post" action="{% url 'contact' %}" class="contact-form-element">
                            {% csrf_token %}
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="{{ form.name.id_for_label }}" class="form-label">Your Name *</label>
                                    {{ form.name }}
                                    {% if form.name.errors %}
                                        <div class="text-danger small mt-1">
                                            {% for error in form.name.errors %}
                                                {{ error }}
                                            {% endfor %}
                                        </div>
                                    {% endif %}
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="{{ form.email.id_for_label }}" class="form-label">Your Email *</label>
                                    {{ form.email }}
                                    {% if form.email.errors %}
                                        <div class="text-danger small mt-1">
                                            {% for error in form.email.errors %}
                                                {{ error }}
                                            {% endfor %}
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="{{ form.subject.id_for_label }}" class="form-label">Subject *</label>
                                {{ form.subject }}
                                {% if form.subject.errors %}
                                    <div class="text-danger small mt-1">
                                        {% for error in form.subject.errors %}
                                            {{ error }}
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                            
                            <div class="mb-4">
                                <label for="{{ form.message.id_for_label }}" class="form-label">Your Message *</label>
                                {{ form.message }}
                                {% if form.message.errors %}
                                    <div class="text-danger small mt-1">
                                        {% for error in form.message.errors %}
                                            {{ error }}
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                            
                            <div class="d-grid">
                                <button type="submit" class="btn btn-primary btn-lg">
                                    <i class="fas fa-paper-plane me-2"></i>Send Message
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            
            <!-- Contact Information -->
            <div class="col-lg-4">
                <div class="contact-info">
                    <!-- Profile Info -->
                    {% if profile %}
                    <div class="contact-card card border-0 shadow-sm mb-4">
                        <div class="card-body text-center">
                            {% if profile.profile_image %}
                                <img src="{{ profile.profile_image.url }}" alt="{{ profile.name }}" 
                                     class="rounded-circle mb-3" style="width: 80px; height: 80px; object-fit: cover;">
                            {% else %}
                                <div class="bg-primary rounded-circle d-inline-flex align-items-center justify-content-center text-white mb-3" 
                                     style="width: 80px; height: 80px;">
                                    <i class="fas fa-user fa-2x"></i>
                                </div>
                            {% endif %}
                            <h3 class="h5 mb-1">{{ profile.name }}</h3>
                            <p class="text-muted mb-0">{{ profile.title }}</p>
                        </div>
                    </div>
                    {% endif %}
                    
                    <!-- Contact Details -->
                    <div class="contact-details card border-0 shadow-sm mb-4">
                        <div class="card-body">
                            <h3 class="h5 mb-4">Contact Information</h3>
                            
                            {% if profile.email %}
                            <div class="contact-item d-flex align-items-center mb-3">
                                <div class="contact-icon bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3" 
                                     style="width: 40px; height: 40px;">
                                    <i class="fas fa-envelope"></i>
                                </div>
                                <div>
                                    <small class="text-muted d-block">Email</small>
                                    <a href="mailto:{{ profile.email }}" class="text-decoration-none">{{ profile.email }}</a>
                                </div>
                            </div>
                            {% endif %}
                            
                            {% if profile.phone %}
                            <div class="contact-item d-flex align-items-center mb-3">
                                <div class="contact-icon bg-success text-white rounded-circle d-flex align-items-center justify-content-center me-3" 
                                     style="width: 40px; height: 40px;">
                                    <i class="fas fa-phone"></i>
                                </div>
                                <div>
                                    <small class="text-muted d-block">Phone</small>
                                    <a href="tel:{{ profile.phone }}" class="text-decoration-none">{{ profile.phone }}</a>
                                </div>
                            </div>
                            {% endif %}
                            
                            {% if profile.location %}
                            <div class="contact-item d-flex align-items-center mb-3">
                                <div class="contact-icon bg-info text-white rounded-circle d-flex align-items-center justify-content-center me-3" 
                                     style="width: 40px; height: 40px;">
                                    <i class="fas fa-map-marker-alt"></i>
                                </div>
                                <div>
                                    <small class="text-muted d-block">Location</small>
                                    <span>{{ profile.location }}</span>
                                </div>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                    
                    <!-- Social Links -->
                    {% if profile %}
                    <div class="social-links card border-0 shadow-sm mb-4">
                        <div class="card-body">
                            <h3 class="h5 mb-4">Follow Me</h3>
                            <div class="social-buttons d-flex flex-wrap gap-2">
                                {% if profile.github_url %}
                                    <a href="{{ profile.github_url }}" class="btn btn-outline-dark" target="_blank">
                                        <i class="fab fa-github me-2"></i>GitHub
                                    </a>
                                {% endif %}
                                {% if profile.linkedin_url %}
                                    <a href="{{ profile.linkedin_url }}" class="btn btn-outline-primary" target="_blank">
                                        <i class="fab fa-linkedin me-2"></i>LinkedIn
                                    </a>
                                {% endif %}
                                {% if profile.twitter_url %}
                                    <a href="{{ profile.twitter_url }}" class="btn btn-outline-info" target="_blank">
                                        <i class="fab fa-twitter me-2"></i>Twitter
                                    </a>
                                {% endif %}
                                {% if profile.website_url %}
                                    <a href="{{ profile.website_url }}" class="btn btn-outline-secondary" target="_blank">
                                        <i class="fas fa-globe me-2"></i>Website
                                    </a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    {% endif %}
                    
                    <!-- Response Time -->
                    <div class="response-info card border-0 shadow-sm">
                        <div class="card-body">
                            <h3 class="h5 mb-3">Response Time</h3>
                            <div class="response-item d-flex align-items-center mb-2">
                                <i class="fas fa-clock text-success me-3"></i>
                                <div>
                                    <small class="text-muted d-block">Typical response</small>
                                    <span class="fw-medium">Within 24 hours</span>
                                </div>
                            </div>
                            <div class="response-item d-flex align-items-center">
                                <i class="fas fa-calendar text-primary me-3"></i>
                                <div>
                                    <small class="text-muted d-block">Available</small>
                                    <span class="fw-medium">Monday - Friday</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- FAQ Section -->
<section class="faq-section py-5 fade-in-section">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <div class="text-center mb-5">
                    <h2 class="section-title">Frequently Asked Questions</h2>
                    <p class="text-muted">Quick answers to common questions</p>
                </div>
                
                <div class="accordion" id="faqAccordion">
                    <div class="accordion-item">
                        <h3 class="accordion-header">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                                What type of projects do you work on?
                            </button>
                        </h3>
                        <div id="faq1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                            <div class="accordion-body">
                                I work on a variety of web development projects including websites, web applications, e-commerce platforms, 
                                and custom software solutions. I specialize in both frontend and backend development.
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <h3 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                                How long does a typical project take?
                            </button>
                        </h3>
                        <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body">
                                Project timelines vary depending on complexity and requirements. A simple website might take 2-4 weeks, 
                                while a complex web application could take 2-6 months. I'll provide a detailed timeline after discussing your needs.
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <h3 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                                Do you provide ongoing support?
                            </button>
                        </h3>
                        <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body">
                                Yes, I offer ongoing maintenance and support services. This includes bug fixes, updates, 
                                performance optimization, and feature enhancements to keep your project running smoothly.
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <h3 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq4">
                                What's your preferred way to communicate?
                            </button>
                        </h3>
                        <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body">
                                I prefer email for initial contact and detailed discussions. For ongoing projects, I use various 
                                communication tools like Slack, Discord, or video calls depending on your preference.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Alternative Contact Methods -->
<section class="alt-contact py-5 bg-light fade-in-section">
    <div class="container">
        <div class="row text-center">
            <div class="col-12 mb-4">
                <h2 class="section-title">Other Ways to Connect</h2>
                <p class="text-muted">Choose the method that works best for you</p>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="contact-method card border-0 shadow-sm h-100">
                    <div class="card-body text-center">
                        <i class="fas fa-calendar-alt fa-3x text-primary mb-3"></i>
                        <h4 class="h5 mb-3">Schedule a Call</h4>
                        <p class="text-muted mb-3">Book a time that works for both of us</p>
                        <a href="#" class="btn btn-outline-primary">Schedule Now</a>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="contact-method card border-0 shadow-sm h-100">
                    <div class="card-body text-center">
                        <i class="fab fa-linkedin fa-3x text-primary mb-3"></i>
                        <h4 class="h5 mb-3">LinkedIn Message</h4>
                        <p class="text-muted mb-3">Connect with me professionally</p>
                        {% if profile.linkedin_url %}
                            <a href="{{ profile.linkedin_url }}" class="btn btn-outline-primary" target="_blank">Connect</a>
                        {% else %}
                            <a href="#" class="btn btn-outline-primary">Connect</a>
                        {% endif %}
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="contact-method card border-0 shadow-sm h-100">
                    <div class="card-body text-center">
                        <i class="fab fa-telegram fa-3x text-primary mb-3"></i>
                        <h4 class="h5 mb-3">Telegram</h4>
                        <p class="text-muted mb-3">Quick messages and updates</p>
                        <a href="#" class="btn btn-outline-primary">Message</a>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="contact-method card border-0 shadow-sm h-100">
                    <div class="card-body text-center">
                        <i class="fab fa-discord fa-3x text-primary mb-3"></i>
                        <h4 class="h5 mb-3">Discord</h4>
                        <p class="text-muted mb-3">Real-time collaboration</p>
                        <a href="#" class="btn btn-outline-primary">Join</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Enhanced form validation
    const form = document.getElementById('contact-form');
    if (form) {
        const inputs = form.querySelectorAll('input, textarea');
        
        inputs.forEach(input => {
            input.addEventListener('blur', validateField);
            input.addEventListener('input', clearValidation);
        });
        
        // Handle form submission
        form.addEventListener('submit', function(e) {
            // Add loading state to submit button
            const submitBtn = this.querySelector('button[type="submit"]');
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Sending...';
            submitBtn.disabled = true;
        });
    }
    
    function validateField(e) {
        const field = e.target;
        const value = field.value.trim();
        let isValid = true;
        let message = '';
        
        // Remove previous validation
        field.classList.remove('is-invalid', 'is-valid');
        
        // Validate based on field type
        if (field.hasAttribute('required') && !value) {
            isValid = false;
            message = 'This field is required.';
        } else if (field.type === 'email' && value) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(value)) {
                isValid = false;
                message = 'Please enter a valid email address.';
            }
        }
        
        // Apply validation styles
        if (value) {
            field.classList.add(isValid ? 'is-valid' : 'is-invalid');
            const feedback = field.parentNode.querySelector('.invalid-feedback');
            if (feedback) {
                feedback.textContent = message;
            }
        }
    }
    
    function clearValidation(e) {
        const field = e.target;
        if (field.classList.contains('is-invalid')) {
            field.classList.remove('is-invalid');
        }
    }
});
</script>
{% endblock %}
